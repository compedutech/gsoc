pr_id,pr_title,pr_body,is_merged,pr_number,pr_url,pr_html_url,pr_state,additions,deletions,pr_changed_files,pr_commits_count,pr_comments_count,pr_review_comments_count,pr_labels_count,pr_assignees_count,pr_labels,pr_created_at,pr_closed_at,time_taken,time_delta,pr_review_comments,pr_commits,contributor,contributor_id,contributor_email,contributor_type,contributions,contributor_public_repos,contributor_private_repos,contributor_followings,contributor_followers
716098506,feat(copyright): Deciding copyrights with Spacy,"<!-- Please refer to CONTRIBUTING.md (https://github.com/fossology/fossology/blob/master/CONTRIBUTING.md)
before creating the pull request to make sure you follow all the standards. -->

## Description

Introducing a Python Script for False Positive Detection of copyrights.

### Changes

1. Updated two flags in the view.
2. Introduced the cases in the DeciderAgentPlugin
3. Introduced checks in main Decider Agent.
4. A PHP function calling the Python Script.
5. Python Script which will Tag the False Positives and the True Positives Copyrights,  WIll remove the clutter depending upon the user's requirements.
6. Updating the Copyright table with the ""is_copyright"" flag and ""is_edited"" columns.

RESULTS:

![Screenshot from 2021-08-20 16-34-29](https://user-images.githubusercontent.com/41343571/130228488-633ac581-d54a-48e3-9874-ecced9970eb4.png)

CLUTTER REMOVAL with more accuracy over deactivation
![FINALPICTURS](https://user-images.githubusercontent.com/41343571/130336031-3c5260c8-62f0-4cfb-8cf9-fd7ea6a6c17f.png)


<a href=""https://gitpod.io/#https://github.com/fossology/fossology/pull/2083""><img src=""https://gitpod.io/button/open-in-gitpod.svg""/></a>

",True,2083,https://api.github.com/repos/fossology/fossology/pulls/2083,https://github.com/fossology/fossology/pull/2083,closed,507,9,12,3,4,41,3,0,"[{'name': 'enhancement'}, {'name': 'ready'}, {'name': 'GSOC-21'}]",2021-08-19 16:42:04+00:00,2022-04-04 07:36:32+00:00,19666468.0,"227 days, 14:54:28","[{'comment_id': 692423621, 'comment_body': 'Hello @Kaushl2208,\r\nPHP Codesniffer test is failing. You have not indented the code properly. Please take a look at the logs https://github.com/fossology/fossology/pull/2083/checks?check_run_id=3374035897#step:4:206', 'comment_created': datetime.datetime(2021, 8, 19, 19, 32, 35, tzinfo=datetime.timezone.utc), 'commenter': 'avinal', 'type': 'User'}, {'comment_id': 692427904, 'comment_body': 'Hey @avinal, Thanks for your review! This is work in progress and I thought first as the implementation will complete, I will clean and clear the check errors as well !! :smile: ', 'comment_created': datetime.datetime(2021, 8, 19, 19, 38, 29, tzinfo=datetime.timezone.utc), 'commenter': 'Kaushl2208', 'type': 'User'}, {'comment_id': 692485726, 'comment_body': 'Yeah, ok', 'comment_created': datetime.datetime(2021, 8, 19, 21, 3, 54, tzinfo=datetime.timezone.utc), 'commenter': 'avinal', 'type': 'User'}, {'comment_id': 692685567, 'comment_body': 'Please change to `0x20` for next free bit.', 'comment_created': datetime.datetime(2021, 8, 20, 5, 56, 37, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 692685723, 'comment_body': 'Please change to `0x40` for next free bit.', 'comment_created': datetime.datetime(2021, 8, 20, 5, 57, 1, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 692685955, 'comment_body': 'Please change to `0xff` to accommodate new bits.', 'comment_created': datetime.datetime(2021, 8, 20, 5, 57, 40, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 692686515, 'comment_body': 'A better check will be `if (empty($uploadId))`. It will take care of `NULL`, ` ` and `0` values.', 'comment_created': datetime.datetime(2021, 8, 20, 5, 59, 4, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 692687244, 'comment_body': ""```suggestion\r\n        $action = '';\r\n        $hash = '';\r\n```"", 'comment_created': datetime.datetime(2021, 8, 20, 6, 0, 55, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 692687622, 'comment_body': 'Can close temp file to free up memory. `fclose($tmpFile)`', 'comment_created': datetime.datetime(2021, 8, 20, 6, 1, 57, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 692688712, 'comment_body': 'Please modify the `Makefile` to install the script as well here: https://github.com/fossology/fossology/blob/62d61b1f95fa1e18614b82097b37ab81c62702f5/src/decider/agent/Makefile#L33-L42\r\n\r\n`$(INSTALL_PROGRAM) $(SCRIPT) $(DESTDIR)$(MODDIR)/$(MODNAME)/agent/$(SCRIPT)`\r\n\r\nThis will allow to use `__DIR__`', 'comment_created': datetime.datetime(2021, 8, 20, 6, 4, 48, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 692688922, 'comment_body': 'Both line look exactly same to me.', 'comment_created': datetime.datetime(2021, 8, 20, 6, 5, 23, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 692689329, 'comment_body': 'Please add the license header and `#!/usr/bin/env python3` to top and add the execute permission to file with `chmod +x`', 'comment_created': datetime.datetime(2021, 8, 20, 6, 6, 26, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 692690084, 'comment_body': 'You can pass the File-like object (`f`) as well instead of reading the string first to optimize memory consumption.', 'comment_created': datetime.datetime(2021, 8, 20, 6, 8, 25, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 692690896, 'comment_body': 'It can also be `(c)` right?', 'comment_created': datetime.datetime(2021, 8, 20, 6, 10, 25, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 692691857, 'comment_body': 'One additional step can be added here to replace `""copyright copyright""` with `""copyright""`?\r\nFor example, if the input is like `Copyright (C) 2021 Kaushlendra`, it will be normalized to `copyright copyright 2021 kaushlendra`.\r\n\r\nBut it will be required only if tagging is being effected because duplicate copyright word.', 'comment_created': datetime.datetime(2021, 8, 20, 6, 12, 51, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 692692895, 'comment_body': 'The constants can be made global by moving them to top of script and save some memory+time.', 'comment_created': datetime.datetime(2021, 8, 20, 6, 15, 20, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 692693785, 'comment_body': 'Call to all `clutterRemoval()` can be moved to the end of loop (after if-elif) ladder with additional check of `if df.loc[index,\'is_copyright\'] == ""t""`?', 'comment_created': datetime.datetime(2021, 8, 20, 6, 17, 42, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 692695440, 'comment_body': ""Can be simplified to\r\n```suggestion\r\n    print(df.to_json(orient='index'))\r\n```"", 'comment_created': datetime.datetime(2021, 8, 20, 6, 21, 39, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 692696385, 'comment_body': ""Also, I think `orient='records'` will be much simpler to process in PHP."", 'comment_created': datetime.datetime(2021, 8, 20, 6, 23, 40, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 692735188, 'comment_body': 'No, After the pre-processing and the removal of punctuations, the filtered sentences have ( c ) only!\r\nBut I will add (c) as well.\r\n', 'comment_created': datetime.datetime(2021, 8, 20, 7, 38, 44, tzinfo=datetime.timezone.utc), 'commenter': 'Kaushl2208', 'type': 'User'}, {'comment_id': 692735630, 'comment_body': 'No, It has no impact on the NER and POS calculation!\r\n', 'comment_created': datetime.datetime(2021, 8, 20, 7, 39, 28, tzinfo=datetime.timezone.utc), 'commenter': 'Kaushl2208', 'type': 'User'}, {'comment_id': 692739107, 'comment_body': 'Here you are talking about line:87?\r\n', 'comment_created': datetime.datetime(2021, 8, 20, 7, 45, 12, tzinfo=datetime.timezone.utc), 'commenter': 'Kaushl2208', 'type': 'User'}, {'comment_id': 692752138, 'comment_body': 'Yep', 'comment_created': datetime.datetime(2021, 8, 20, 8, 6, 34, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 692752440, 'comment_body': 'Ah, I get it. Because of the `"" "".join()` there will be a space any ways.', 'comment_created': datetime.datetime(2021, 8, 20, 8, 7, 8, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 692752596, 'comment_body': 'Okay, then we can leave it.', 'comment_created': datetime.datetime(2021, 8, 20, 8, 7, 23, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 714472352, 'comment_body': 'A gentle reminder @Kaushl2208 :-)', 'comment_created': datetime.datetime(2021, 9, 23, 5, 0, 39, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 714472976, 'comment_body': 'A probable debugging statement?', 'comment_created': datetime.datetime(2021, 9, 23, 5, 2, 56, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 714473965, 'comment_body': 'Both functions `getCopyrightsToDisableFalsePositives()` and `getCopyrightsToDisableFalsePositivesClutter()` differ only while calling `callCopyrightDeactivationClutterRemovalScript()` with flag `0` or `1` and while setting the values for **hash** and **content**. Can these be merged?\r\n\r\n```diff\r\ndiff --git a/onlyfp b/fpandc\r\nindex baace11..9601d0b 100644\r\n--- a/onlyfp\r\n+++ b/fpandc\r\n@@ -27,13 +27,13 @@\r\n     foreach ($deactivatedCopyrights as $deactivatedCopyright) {\r\n       $item = $deactivatedCopyright[\'uploadtree_pk\'];\r\n       $itemTreeBounds = $this->uploadDao->getItemTreeBounds($item, $uploadTreeTableName);\r\n-      $hash = $deactivatedCopyright[\'hash\'];\r\n-      $content = $deactivatedCopyright[\'content\'];\r\n       $cpTable = \'copyright\';\r\n       if ($deactivatedCopyright[\'is_copyright\'] == ""t"") {\r\n         $action = \'\';\r\n         $hash = \'\';\r\n+        $content = $deactivatedCopyright[\'edited_text\'];\r\n       } else {\r\n+        $hash = $deactivatedCopyright[\'hash\'];\r\n         $action = \'delete\';\r\n       }\r\n       $this->copyrightDao->updateTable($itemTreeBounds, $hash, $content, $this->userId, $cpTable, $action);\r\n```', 'comment_created': datetime.datetime(2021, 9, 23, 5, 6, 32, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 714474195, 'comment_body': 'Additional space at end of line. Please remove.', 'comment_created': datetime.datetime(2021, 9, 23, 5, 7, 22, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 714474515, 'comment_body': 'Please add license headers to the file and do a `chmod +x copyrightDeactivationClutterRemovalScript.py` on it before committing.', 'comment_created': datetime.datetime(2021, 9, 23, 5, 8, 24, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 714475861, 'comment_body': 'Please change `elif` to `if` as there can be both `( c )` and &copy; in the same line.', 'comment_created': datetime.datetime(2021, 9, 23, 5, 13, 3, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 714475969, 'comment_body': 'Here as well.', 'comment_created': datetime.datetime(2021, 9, 23, 5, 13, 26, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 714476587, 'comment_body': '```suggestion\r\n    if set(THE_PROBABLE_LOGIC_POS_CHECK).intersection(set(listA[""POS_TAG""])) and set(THE_PROBABLE_LOGIC_NER_CHECK).intersection(set(listB[""Values""])):\r\n```\r\nCan be combined together for better readability.', 'comment_created': datetime.datetime(2021, 9, 23, 5, 15, 36, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 714476876, 'comment_body': 'This can be combined as well.\r\n```suggestion\r\n        if clutter_flag == 1 and df.loc[index,\'is_copyright\'] == ""t"":\r\n```', 'comment_created': datetime.datetime(2021, 9, 23, 5, 16, 21, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 714484182, 'comment_body': ""This as a whole can be simplified to:\r\n\r\n```python\r\norg_pos = -1\r\nperson_pos = -1\r\nif 'ORG' in ner_list['Values']:\r\n  string3 = re.sub(r'''[^\\w\\s()]+''', '', string3) # I am not sure why this is in only one of the branch\r\n  las_ent = len(ner_list['Values']) - ner_list['Values'][::-1].index('ORG') - 1 # Get the last org\r\n  org_name = ner_list['Entity'][las_ent]\r\n  try:\r\n    org_pos = string3.rindex(org_name) + len(org_name)\r\n  except:\r\n    org_pos = -1\r\nif 'PERSON' in ner_list['Values']:\r\n  las_ent = len(ner_list['Values']) - ner_list['Values'][::-1].index('PERSON') - 1 # Get the last person\r\n  person_name = ner_list['Entity'][las_ent]\r\n  try:\r\n    person_pos = string3.rindex(person_name) + len(person_name)\r\n  except:\r\n    person_pos = -1\r\n\r\nif org_pos > 0 or person_pos > 0:\r\n  del_upto = max(org_pos, person_pos)\r\n  df.loc[index,'edited_text'] = string3[:del_upto]\r\n```\r\n\r\nNote, I've modified the script to get last person from the list and last org, also to get the last occurrence of them in the original copyright to prevent as much data loss as possible. If the results are not as intended, please revert them."", 'comment_created': datetime.datetime(2021, 9, 23, 5, 39, 50, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 714484544, 'comment_body': 'Please make this regex also a constant at the top of the script. It will make it easier to locate the regex if someone needs modifications to be done.', 'comment_created': datetime.datetime(2021, 9, 23, 5, 41, 3, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 800140070, 'comment_body': ""Nested if..else is there. Can't be combined."", 'comment_created': datetime.datetime(2022, 2, 6, 7, 33, 48, tzinfo=datetime.timezone.utc), 'commenter': 'Kaushl2208', 'type': 'User'}, {'comment_id': 802565850, 'comment_body': 'Please add a new line at the end of the file.\r\n\r\nAnd you can also add your copyright as this PR brings new changes to the class logic.', 'comment_created': datetime.datetime(2022, 2, 9, 11, 33, 1, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 802567002, 'comment_body': 'Thanks for pointing it out.', 'comment_created': datetime.datetime(2022, 2, 9, 11, 34, 35, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 802568026, 'comment_body': 'Extra lines can probably be removed.\r\n\r\nAnd please change the indentation to 2 spaces for the Python file.', 'comment_created': datetime.datetime(2022, 2, 9, 11, 35, 55, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}, {'comment_id': 831893469, 'comment_body': 'Install pandas as dependency.', 'comment_created': datetime.datetime(2022, 3, 22, 8, 32, 35, tzinfo=datetime.timezone.utc), 'commenter': 'GMishx', 'type': 'User'}]","[{'commit_sha': '19d6cb2f0428289942b5aebcb9fd7dd9d2a30ace', 'committer_username': 'Kaushl2208', 'committer_name': 'Kaushlendra Pratap', 'committer_email': None, 'commit_date': datetime.datetime(2018, 7, 17, 18, 16, 56, tzinfo=datetime.timezone.utc)}, {'commit_sha': 'd5bdf4acd4a6a43c14d6fb4726e18d81f24712f3', 'committer_username': 'GMishx', 'committer_name': 'Gaurav Mishra', 'committer_email': 'gmishx@gmishx.in', 'commit_date': datetime.datetime(2016, 3, 25, 21, 43, 54, tzinfo=datetime.timezone.utc)}, {'commit_sha': '5fd23105f9c3a50977e15a3bccb5d499a8a21698', 'committer_username': 'GMishx', 'committer_name': 'Gaurav Mishra', 'committer_email': 'gmishx@gmishx.in', 'commit_date': datetime.datetime(2016, 3, 25, 21, 43, 54, tzinfo=datetime.timezone.utc)}]",Kaushlendra Pratap,41343571,,User,,75,,11,87

Project_ID,Name,Full_name,Language,Forks,Stars,Watchers,contributors,commits,issues,branches,PRs_count,contributor pullrequests
15866170,fossology,fossology/fossology,PHP,397,777,64,142,9788,394,76,21,"[{'id': 716098506, 'number': 2083, 'closed': datetime.datetime(2022, 4, 4, 7, 36, 32, tzinfo=datetime.timezone.utc), 'created': datetime.datetime(2021, 8, 19, 16, 42, 4, tzinfo=datetime.timezone.utc), 'time_taken': 19666468.0, 'time_delta': '227 days, 14:54:28', 'additions': 507, 'deletions': 9, 'state': 'closed'}, {'id': 391439625, 'number': 1669, 'closed': datetime.datetime(2020, 3, 31, 22, 56, 50, tzinfo=datetime.timezone.utc), 'created': datetime.datetime(2020, 3, 20, 9, 50, 28, tzinfo=datetime.timezone.utc), 'time_taken': 997582.0, 'time_delta': '11 days, 13:06:22', 'additions': 0, 'deletions': 0, 'state': 'closed'}, {'id': 386640854, 'number': 1659, 'closed': datetime.datetime(2020, 3, 12, 12, 40, 59, tzinfo=datetime.timezone.utc), 'created': datetime.datetime(2020, 3, 11, 11, 44, 18, tzinfo=datetime.timezone.utc), 'time_taken': 89801.0, 'time_delta': '1 day, 0:56:41', 'additions': 45, 'deletions': 45, 'state': 'closed'}]"
